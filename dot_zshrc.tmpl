# Oh My Zsh setup
export ZSH="$HOME/.oh-my-zsh"
export ZSH_DISABLE_COMPFIX=true

# Garante ~/.local/bin no PATH (para binários manuais como navi, lazygit, etc.)
case ":$PATH:" in *":$HOME/.local/bin:"*) ;; *) PATH="$HOME/.local/bin:$PATH" ;; esac
export PATH

DISABLE_UPDATE_PROMPT=true
zstyle ':omz:update' mode auto
zstyle ':omz:update' frequency 13


# --- mise (version manager) ---
if command -v mise >/dev/null 2>&1; then
  eval "$(mise activate zsh)"
elif [[ -x "$HOME/.local/bin/mise" ]]; then
  eval "$("$HOME/.local/bin/mise" activate zsh)"
fi


plugins=(
  git
  docker-compose
  fzf
  aws
  gh
  gcloud
  alias-finder
  you-should-use
  zsh-interactive-cd
  zsh-navigation-tools
  zsh-mise
)

source $ZSH/oh-my-zsh.sh

# fzf init (no Linux, ou se não inicializado por brew)
if [[ "$OSTYPE" != "darwin"* ]] && [ -f ~/.fzf.zsh ]; then
  source ~/.fzf.zsh
fi

# zoxide init
eval "$(zoxide init zsh)"

# starship prompt
eval "$(starship init zsh)"

# Carregar fzf-tab manualmente (após compinit, antes de zsh-autosuggestions)
if [ -d "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/fzf-tab" ]; then
  source "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/fzf-tab/fzf-tab.plugin.zsh"
fi

# Agora carregar zsh-autosuggestions
if [ -d "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/zsh-autosuggestions" ]; then
  source "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh"
fi

# zsh-syntax-highlighting — sempre por último
if [[ -d "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting" ]]; then
  source "${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"
fi
